# ChatGPT TTS Grabber

A Tampermonkey/Greasemonkey userscript that **automatically captures and downloads the text-to-speech (TTS) audio** generated by ChatGPT whenever you click the voice playback button.

## âœ¨ Features

- ğŸ”Š Automatically detects and downloads audio streamed via ChatGPTâ€™s voice feature (including glimmer and other voices)
- ğŸ“¥ Captures streamed audio via Media Source Extensions (MSE), even if traditional fetch hooks fail
- ğŸ’ Works with tampermonkey or any userscript-compatible extension
- ğŸ’¡ Compatible with both `chat.openai.com` and `chatgpt.com`
- ğŸ“ Names your audio files based on the chat title

## ğŸ“¦ Installation

1. Install [tampermonkey](https://www.tampermonkey.net/) (or similar userscript manager)
2. Install the script via greasyfork (link coming soon) or from the github repo
3. Visit chatgpt and use the voice playback feature as usual
4. Watch your browser download the audio automatically as `.webm`, `.mp3`, or `.aac` files

## âš™ï¸ How It Works

ChatGPT uses Media Source Extensions (MSE) to stream TTS audio to its player. This script monkey-patches the browserâ€™s `MediaSource` API to capture and reconstruct all audio chunks, packaging them into a downloadable `Blob`.

This approach works even if the audio is **streamed directly** and not returned as a traditional file from the server.

### ğŸ”¤ filename detection

The script also intercepts chatgptâ€™s internal request:

`POST https://chatgpt.com/ces/v1/t`

From that request body, it extracts:

```
context.page.title
```

Then it:

- trims it  
- replaces spaces with underscores  
- strips unsafe characters  
- falls back to the document title or `chatgpt` if missing  

This produces a clean prefix used in the file:

```
<chat_title>-<timestamp>.<ext>
```

So instead of `chatgpt-12345.aac`, you'll get something like:

```
weekend_plans_chat-1732300203948.aac
```

## ğŸ§ª Known Limitations

- May not work if ChatGPT changes its audio streaming pipeline to an AudioWorklet or encrypted transport
- Filenames rely on the `/ces/v1/t` analytics request remaining consistent
- If interception fails, the script falls back to a generic name

## ğŸ›  Contributing

Feel free to fork or submit improvements on github.

## ğŸ“„ License

MIT
